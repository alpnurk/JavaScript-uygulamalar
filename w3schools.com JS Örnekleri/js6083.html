<!DOCTYPE html>
<html>
<head>
    <meta charset="iso-8859-9 Türkçe" />
    <title>js6083.html: localStorage ve sessionStorage nesneleriyle tarayýcýda veri saklama örneði.</title>
    <style>
        body {background-color:OliveDrab; color: Cyan; font-size:20px;}
        input {background-color:Navy; color:orange;}
        button {background-color: FireBrick; color: yellow; font-size:15px;}
        #göster {color:Yellow; font-size:18px;}

        textarea {
            padding:5px;
            width:500px;
            height: 100px;
            background-color:Moccasin;
            color: Blue;}
    </style>
    <script>
        function fonk1() {document.getElementById ("göster").innerHTML ="";}
    </script>
</head>
<body>
    <input type="button" value="reload() ile Yenile" onClick="window.location.reload();"><br/>
    <input type="button" value="Sil" onClick="fonk1()">
    <h4>localStorage/sessionStorage</h4>
    <p id="göster">Paragraf</p>

    <input type="button" value="Tüm lokal depoyu gör" onClick="fonk2()">
    <input type="button" value="Tümünü sil" onClick="localStorage.clear()"><br>
    <input type="button" value="Tek lokal depoyu gör" onClick="fonk3()"><br>
    <input type="button" value="Lokal depo gir/deðiþtir" onClick="fonk4()">
    <p id="göster2">Paragraf-2</p>

    <textarea id="metin" placeholder="Buraya girdiðiniz açýklamalar localStorage ile tarayýcýda saklanýr, kaybolmaz...">
    </textarea>
    
<br>

    <button onclick="localStorage.removeItem ('metin'); metin.value=''";>Temizle</button>

    <script>
        function fonk2() {
            let sonuç = "";
            for (let i=0; i<localStorage.length; i++) {
                let anahtar = localStorage.key (i);
                sonuç += "<br>" + `${anahtar}: ${localStorage.getItem (anahtar)}`;
            } // for sonu...
            //document.getElementById ("göster2").innerHTML = sonuç;

            sonuç = "";
            for (let anahtar in localStorage) {
                if ( !localStorage.hasOwnProperty (anahtar)) {continue;}
                sonuç += "<br>" + `${anahtar}: ${localStorage.getItem (anahtar)}`;
            } // for sonu...
            //document.getElementById ("göster2").innerHTML = sonuç;

            sonuç = "";
            let anahtarlar = Object.keys (localStorage);
            for (let anahtar of anahtarlar) {
                sonuç += "<br>" + `${anahtar}: ${localStorage.getItem (anahtar)}`;
            } // for sonu...
            sonuç +="<br>Toplam lokal bilgi sayýsý: " + localStorage.length;
            document.getElementById ("göster2").innerHTML = sonuç;
        } // func sonu..
        function fonk3() {
            let anahtar = prompt ("Görmek istediðiniz anahtar deðeri gir:", "deneme");
            document.getElementById ("göster2").innerHTML = localStorage.getItem (anahtar);
        } // func sonu..
        function fonk4() {
            let anahtar = prompt ("Deðiþtirmek/Girmek istediðiniz anahtar deðeri gir:", "deneme");
            let deðer = prompt ("Ýçerik deðerini girin:", "M.Nihat Yavaþ");
            localStorage.setItem (anahtar, deðer);
        } // func sonu..

        window.onstorage = olay => {// Diðer programlardaki deðiþikliði buraya yansýtýr...
            if (olay.key != 'now') return;
            alert (olay.key + ':' + olay.newValue + " adres " + olay.url);
        }; // win sonu...
        localStorage.setItem ('now', Date.now());

        metin.value = localStorage.getItem ('metin');
        metin.oninput = () => {localStorage.setItem ('metin', metin.value)
};

        document.getElementById ("göster").innerHTML =
            "1) Að depolama nesneleri olan localStorage/yerelSaklama ve sessionStorage/celseSaklama \
            tarayýcýda anahtar/deðer çifti bilgisi saklar. Ancak sayfa yenilendiðinde sessionStorage, \
            tarayýcý deðiþtiðinde de localStorage silinir. Çerezden farklý olarak 2MB'den fazla bilgi depolayabilir, \
            http protokolüyle sunucuya baðlanmadan (http://localhost/.. kipinde deðil, basitçe file:///c:/.. dosya kipinde) \
            JS tarafýndan gerçekleþtirilir,  farklý protokoller birbirlerinin depoladýklarýna eriþemezler, \
            giriþ adet sýnýrý yoktur, çerez gibi sonlanma tarihi yoktur yani siz silmedikce kalýr." +
            "<br>Kullandýðý bazý metod ve özellikler: setItem(anahtar,deðer)/sakla, getItem (anahtar)/al, \
            removeItem(anahtar)/sil, clear()/tümünüSil, key(endeks)/konumdakiAnahtar, length/saklananSayýsý." +
            "<br>2) [localStorage.setItem('deneme', 'M.Nihat Yavaþ - 1957')] ile deneyelim: " +
            localStorage.setItem ("deneme1", "M.Nihat Yavaþ - 1957") + "=" +
            localStorage.getItem ('deneme1') +
            "<br>==>localStorage.getItem('deneme') ile ayný tarayýcýda olmak üzere, baþka bir \
            programdan (tarayýcý aç/kapa sonrasý) bu deðere eriþilmektedir." +
            "<br>3) Atanan deðer, sayý da olsa dizgeye çevrilir. Ayný iþlemi deðiþkene deðer \
            atarmýþcasýna da yapabiliriz: " +
            (localStorage.deneme2 = 1957) + "=" + localStorage.deneme2 +
            "<br>4) localStorage.removeItem('deneme3') veya delete localStorage.deneme3 \
            ile bir anahtar/deðer çiftini silebiliriz: " + (localStorage.deneme3=2019) + "=" +
            localStorage.deneme3 + "; " + (delete localStorage.deneme3) + "=?" + localStorage.deneme3 +
            "<br>5) localStorage taranabilir deðildir, ama yine de birkaç farklý þekilde localStorage \
            içindeki bütün anahtarlarý (bizim yaratmadýklarýmýzý da) süzgeçleyip deðerlerine eriþebiliriz." +
            "<br>==>Alttaki düðmelerle lokal depolama tek/tüm anahtar-deðer çiftlerini görebilir, \
            tek/tüm silebilir, yeni giriþ/deðiþiklik yapabilirsiniz:" +
            "<br>6) sessionStorage da localStorage gibi, ancak daha kýsýtlýdýr. Tarayýcý kapandýðýnda \
            yada baþka programdan çaðrýldýðýnda bilgiler kaybolur. " +
            sessionStorage.setItem ('deneme1', 20190922) + "= " + sessionStorage.getItem ("deneme1") +
            "<br>7) Mevcut anahtar deðerleri kolayca deðiþtirilebilir: " +
            (localStorage ["deneme"] = "Mahmut Nihat Yavaþ, 1957 Yeþilyurt-Malatya doðumlu") +
            "<br>==>Hatta bu deðiþiklikler window.onStorage kontroluyla farklý programlara da \
            alert ikazýyla uyarýp orada da yansýyan deðerler güncellenebilir. js6083x.html alt-programla \
            eþgüdümlü olarak bu otomatik güncellemeyi test edebilirsiniz." +
            "<br>8) Alttaki metin kutusuna yazdýðýnýz herþey anýnda localStorage'a kaydedildiðinden \
            dolayý elektrik kesintisi veya bilgisayar arýzalarýndan kaybolmaz; baþka zaman yine \
            ayný tarayýcýndan girerek verilerinize ulaþýrsýnýz."
    </script>
</body>
</html>

<!--Alttaki küçük kodlamayý baþka bir js6083x.html programýyla ayný tarayýcýda çalýþtýrýp deneyin:
<script>
    window.onstorage = olay => {// Diðer programlardaki deðiþikliði buraya yansýtýr...
        if (olay.key != 'now') return;
        alert (olay.key + ':' + olay.newValue + " adres " + olay.url);
    }; // win sonu...
   localStorage.setItem ('now', Date.now() );

    document.write (localStorage.getItem ('deneme') );
    document.write ("<br>" + localStorage.getItem ('deneme1') );
    document.write ("<br>" + localStorage.deneme2);
    document.write ("<br>" + localStorage.metin);
    
    document.write ("<br><br>" + sessionStorage.deneme1);
</script>
-->