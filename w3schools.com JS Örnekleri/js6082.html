<!DOCTYPE html>
<html>
<head>
    <meta charset="iso-8859-9 Türkçe" />
    <title>js6082.html: BOM tarayýcýnýn JS çerezleri-2 örneði.</title>
    <style>
        body {background-color:OliveDrab; color: Cyan; font-size:20px;}
        input {background-color:Navy; color:orange;}
        button {background-color: FireBrick; color: yellow; font-size:15px;}
        #göster {color:Yellow; font-size:18px;}
    </style>
    <script>
        function fonk1() {document.getElementById ("göster").innerHTML ="";}
    </script>
</head>
<body>
    <input type="button" value="reload() ile Yenile" onClick="window.location.reload();"><br/>
    <input type="button" value="Sil" onClick="fonk1()">
    <h4>BOM ÇEREZLERÝ-2</h4>
    <p id="göster">Paragraf</p>

    <input type="button" value="Mevcut bir çerezi ara" onClick="fonk2()">
    <input type="button" value="Mevcut bir çerezi deðiþtir veya yenisini yarat" onClick="fonk3()">
    <input type="button" value="Mevcut bir çerezi sil" onClick="fonk4()">
    <input type="button" value="Tüm çerezler" onClick="document.getElementById ('göster2').innerHTML = decodeURIComponent (document.cookie)">
    <p id="göster2">Paragraf-2</p>

    <script>
        function fonk2() {
            function çereziBul (ad) {
                let eþleþenler = "";
                if (ad) {eþleþenler = document.cookie.match (new RegExp (
                    "(?:^|; )" + ad.replace (/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)") );}
                return eþleþenler ? decodeURIComponent (eþleþenler [1]) : undefined;
            } // func sonu...
            kullanýcý = prompt ("Bulmak istediðiniz çerezin adýný girin:", "kullanýcýadý");
            document.getElementById ("göster2").innerHTML = çereziBul (kullanýcý);
        } // func sonu...
        function fonk3() {
            function çereziDeðiþtirYarat (ad, deðer, seçenekler) {
                // seçenekler için: path, domain, secure vb girilebilir...
                let güncelÇerez = ad + "=" + deðer;
                for (let anahtar in seçenekler) {
                    güncelÇerez += "; " + anahtar;
                    let seçenekDeðeri = seçenekler [anahtar];
                    if (seçenekDeðeri) {güncelÇerez += "=" + seçenekDeðeri;}
                } // for sonu...
                document.cookie = güncelÇerez;
                document.getElementById ("göster2").innerHTML = decodeURIComponent (güncelÇerez);
            } // func sonu...
            let kullanýcý = encodeURIComponent (prompt ("Deðiþtirmek istediðiniz çerezin adýný girin:", "kullanýcýadý") );
            let deðer = encodeURIComponent (prompt ("Çerezin deðerini girin [HTML efekti yapýlabilir]:", "M.Nihat Yavaþ") );
            let tarih = prompt ("Sona erme tarihini girin:", "Tue, 19 Jan 2038 03:14:07 UTC");
            çereziDeðiþtirYarat (kullanýcý, deðer, {expires:tarih, "max-age":3600, özel1:"Yeþilyurt-Malatya", özel2: "Memet oðlu, 1957 doðumlu"} );
        } // func sonu...
        function fonk4() {
            let kullanýcý = prompt ("Silmek istediðiniz çerezin adýný girin:", "kullanýcýadý");
            document.cookie = kullanýcý + "=; max-age=-1";
            document.getElementById ("göster2").innerHTML = decodeURIComponent (document.cookie);
        } // func sonu...

        document.getElementById ("göster").innerHTML =
            "0) JS ve .html dosyalarý üzerinde çift týklanýnca seçili tarayýcýda çalýþýrlar. \
            Ancak (file:///c:/User...) yoluyla baþlayan bu program dosyalarý açýldýklarý \
            tarayýcýda çerez yaratamazlar. Tarayýcýnýn çerez yaratabilmesi için .html \
            JS programlarýnýn (http://localhost:8000/örnek.html) þeklinde lokalsunucu \
            kipinde çalýþtýrýlmasý gerekmektedir. Bunun en pratik çözümü Python'un \
            http.server modülünü kullanmaktýr. (>python -m http.server) komutuyla \
            ayný dizindeki python cmd penceresinde giriþ yaparak http servisi baþlatýlýr \
            ve adres satýrýndaki (file:///C:/Users/pc/Desktop/MyFiles/4. Dersler/javascript/örnek.html) \
            yerine (http://localhost:8000/örnek.html) girilirse, artýk tarayýcý çerez yaratacaktýr." +
            "<br>1) Çerezler doðrudan tarayýcýya yüklenen çerez1=deðer1, çerez2=deðer2,.. \
            þeklindeki kullanýcý-deðer bilgi çiftleridir. document.cookie ile tarayýcýdaki varsa \
            mevcut çerezler okunabilir: " + 
            "<br>==>" + window.document.cookie +
            "<br>2) (document.cookie='kullanýcý=mny1') ile tarayýcýdaki mevcut çerezlere \
            kullanýcý-mny çerez-deðer bilgi çifti de eklenmiþ olur. Eklenmiþ mi bakalým: " +
            (document.cookie="kullanýcý=mnyavaþ") +
            "<br>==>" + decodeURIComponent (document.cookie) +
            "<br>3) kullanýcý=deðer için her þey yazýlabilir, encodeURIComponent arþiv \
            fonksiyonu girilen karakterlerin icapedenlerini escape'e otomatikmen çevirir. \
            Örneðin.(benim adým = M.Nihat Yavaþ) girelim ve decodeURIComponent()'siz sonucu görelim: " +
            (document.cookie = encodeURIComponent ("benim adým") + "=" + encodeURIComponent ("M.Nihat Yavaþ, 1957 Yeþilyurt - Malatya doðumlu") ) +
            "<br>==>" + decodeURIComponent (document.cookie) +
            "<br>4) Bir çerez azami 4kb ebatlý olabilir. Ayrýca toplam çerez kapasitesi de 20+ adetle \
            sýnýrlýdýr. Çerezin herbir anahtar=deðer grubu birbirinden (;) ile ayrýlýr." +
            "<br>==>(path=/) çerezi kök sayfada yaratýr; istediðimiz sayfa kategorisini oluþturabiliriz. \
            Örn. (path=/yönetim), (path=/yönetim/özel), (path=/anasayfa) vb..." +
            "<br>==>(domain=bloðum.com), (domain=site2019.com),... Varsayýlý olarak bir sitede \
            yaratýlan çerezler diðerinden veya altsitelerden görülmez. Altsitelerden görülmesini \
            istersek (domain=site.com) belirttiðimizde altsitesi forum.site.com'dan çerezler görünür." +
            "<br>==>Normalen çerezler celseliktir, yani tarayýcý kapandýðýnda otomatikmen \
            silinirler. Ancak expires veya max-age ile silinmesini öteleyebiliriz. Örn.\
            (expires=Tue, 19 Jan 2038 03:14:07 GMT) o tarihte siler, veya yaratýldýðýndan 1 gün sonra silinecek \
            (document.cookie = 'kullanýcý=Nihat; expires=' + new Date(Date.now() + 86400e3).toUTCString() ). \
            Yaratýldýðýndan 1 saat sonra silinecek (document.cookie='kullanýcý=Nihat; max-age=3600')." +
            "<br>5) Silmek istediðimiz çereze geçmiþ veya anýn tarihi atanabilir." +
            "<br>==>Örn.Mevcut (benim adým) ve username çerezlerini silip sonucu görelim: " +
            (document.cookie = encodeURIComponent ("benim adým") + "=''; expires=Sun, 1 Sep 2019 0:00:00 GMT") + "; " +
            (document.cookie = "username=''; max-age=0") +
            "<br>==>" + decodeURIComponent (document.cookie) +
            "<br>6) Güventi https protokolünden örn. site.com sayfasýnda yarattýðýmýz çerezlerin \
            açýk http protoküyle görülmesini istemiyorsak https'deyken (document.cookie = 'kullanýcý=Nihat; secure') \
            güvenli/secure bayraðýyla http protokolünden görülmesini engelleyebiliriz." +
            "<br>7) Örn. Alttaki düðmeyle anahtaradý girilen çerezin mevcudiyetini kontrol edebilirsiniz:" +
            "<br>==>Örn.Alttaki düðmeyle bir çerezin içerik deðerlerini deðiþtirebilirsiniz:" +
            "<br>==>Örn.Alttaki düðmeyle bir çerezi negatif tarihle silebilirsiniz:"
    </script>
</body>
</html>