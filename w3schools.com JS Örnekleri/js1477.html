<!DOCTYPE html>
<html>
<head>
    <meta charset="iso-8859-9 Türkçe" />
    <title>js1477.html: Sýnýfa sonradan metod katma örneði.</title>
    <style>
        body {background-color:OliveDrab; color: Cyan; font-size:20px;}
        input {background-color:Navy; color:orange;}
        button {background-color: red; color: yellow; font-size:15px;}
        #göster {color:Yellow; font-size:18px; margin-top:2em; text-align:ccenter;}
    </style>
    <script>
        function fonk1() {document.getElementById ("göster").innerHTML ="";}
    </script>
</head>
<body>
    <input type="button" value="reload() ile Yenile" onClick="window.location.reload();"><br/>
    <input type="button" value="Sil" onClick="fonk1()">
    <h4>class NESNESÝ-Metod katma</h4>
    <p id="göster">Paragraf</p>

    <script>
        class Kullanýcý {constructor (a, b) {this.ad = a; this.memleket = b;} }
        let katkýMetodlarý = {
            selamlaþma() {return `Merhabalar ${this.memleket}'lý ${this.ad}'a!..`;},
            vedalaþma() {return `Hoþçakal ${this.memleket}'lý ${this.ad}!..`;} };
        Object.assign (Kullanýcý.prototype, katkýMetodlarý);
        let kullanýcý = new Kullanýcý ("Nihat", "Malatya");

        let olayKatkýlarý = {
            aç (olayAdý, kontrol) {
                if (!this._olayKontrolleri) this._olayKontrolleri = {};
                if (!this._olayKontrolleri [olayAdý]) {this._olayKontrolleri [olayAdý] = [];}
                this._olayKontrolleri [olayAdý].push (kontrol); }, // aç sonu...
            kapa (olayAdý, kontrol) {
                let kontroller = this._olayKontrolleri && this._olayKontrolleri [olayAdý];
                if (!kontroller) return;
                for (let i = 0; i < kontroller.length; i++) {
                    if (kontroller [i] === kontrol) {kontroller.splice (i--, 1);}
                } // for sonu...
            }, // kapa sonu...
            tetikle (olayAdý, ...argümanlar) {
                if (!this._olayKontrolleri || !this._olayKontrolleri [olayAdý]) {return;}
                this._olayKontrolleri [olayAdý].forEach (kontrol => kontrol.apply (this, argümanlar));
            } // tetik sonu...
        }; // let sonu...
        class Menü {seçim (deðer) {this.tetikle ("seç", deðer);} }
        Object.assign (Menü.prototype, olayKatkýlarý);
        let menü = new Menü();
        
        document.getElementById ("göster").innerHTML =
            "1) Yarattýðýmýz bir özel sýnýfa sonradan metod katabiliriz: " +
            kullanýcý.selamlaþma() + "; " + kullanýcý.vedalaþma() +
            "<br/>Not: ${deðiþken} yönteminde tek/çift-týrnak yerine AltGr-virgül=` \
            tuþu kullanýlmalý." +
            "<br/>2) Olay yakalayýcý trigger/tetikle, aç ve kapa olay metodlarýný seçilen \
            deðer giriþli bir menüye baðlayalým. Olay dinleyici kapalýyken menü seçimleri \
            duyarsýzdýr, ancak açýkken, girilen menü seçim deðeri aynen alert/ikaz kutusunda \
            yansýtýlacaktýr (menü açýk): " + menü.aç ("seç", deðer => alert (`Seçilen deðer: ${deðer}`)) +
            "; " + menü.seçim ("123") + "; " + menü.seçim ("12.07.2019 Cuma, 00:30")
    </script>
</body>
</html>